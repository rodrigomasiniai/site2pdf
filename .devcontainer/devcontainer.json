{
    "name": "site2pdf Development Container",
    
    // Use a pre-built image with Node.js 18 and Debian Bullseye
    "image": "mcr.microsoft.com/vscode/devcontainers/javascript-node:18-bullseye",
    
    // Specify additional features if needed (optional)
    "features": {
        // Example: Install Puppeteer with Chromium
        "ghcr.io/devcontainers/features/puppeteer:1": {
            "installChromium": "true"
        }
    },
    
    // Customize VS Code settings and extensions
    "customizations": {
        "vscode": {
            "settings": {
                // TypeScript configuration
                "typescript.tsdk": "node_modules/typescript/lib",
                "editor.formatOnSave": true,
                
                // Biome (Linter) configuration
                "biome.enable": true,
                "biome.configPath": ".biome.json",
                
                // Jest configuration
                "jest.autoRun": "off",
                
                // Exclude certain files and folders from the explorer
                "files.exclude": {
                    "node_modules": true,
                    "dist": true,
                    ".coverage": true,
                    ".biomecache": true
                }
            },
            "extensions": [
                "dbaeumer.vscode-eslint",
                "esbenp.prettier-vscode",
                "ms-vscode.vscode-typescript-tslint-plugin",
                "biome.biomedev",
                "orta.vscode-jest",
                "eamodio.gitlens"
            ]
        }
    },
    
    // Forward necessary ports (if your application exposes any)
    // "forwardPorts": [3000],
    
    // Define environment variables (if needed)
    // "remoteEnv": {
    //     "API_KEY": "${env:API_KEY}"
    // },
    
    // Install additional system dependencies and project dependencies
    "postCreateCommand": "sudo apt-get update && sudo apt-get install -y libxkbcommon0 libnss3 libxss1 libasound2 fonts-liberation libappindicator3-1 libatk-bridge2.0-0 libatspi2.0-0 libgtk-3-0 libgbm-dev && git config --global --add safe.directory ${containerWorkspaceFolder} && npm install",
    
    // Run commands after the container starts
    "postStartCommand": "npm run build && pre-commit install",
    
    // Specify the default user
    "remoteUser": "vscode",
    
    // Optional: Mount additional volumes if needed
    // "mounts": [
    //     "source=volume-name,target=/path/in/container,type=volume"
    // ],
    
    // Optional: Override the workspace folder
    // "workspaceFolder": "/workspace"
}
